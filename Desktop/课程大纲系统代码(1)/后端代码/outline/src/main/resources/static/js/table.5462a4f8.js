(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["table"],{"142a":function(e,t,a){"use strict";a("e706")},"1cf2":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 大纲列表\n      ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{type:"number",placeholder:"大纲ID"},model:{value:e.query.outline_id,callback:function(t){e.$set(e.query,"outline_id",t)},expression:"query.outline_id"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"文件名"},model:{value:e.query.file_name,callback:function(t){e.$set(e.query,"file_name",t)},expression:"query.file_name"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"英文名"},model:{value:e.query.en_name,callback:function(t){e.$set(e.query,"en_name",t)},expression:"query.en_name"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"上传学院"},model:{value:e.query.college_id,callback:function(t){e.$set(e.query,"college_id",t)},expression:"query.college_id"}}),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"大纲状态"},model:{value:e.query.outline_state,callback:function(t){e.$set(e.query,"outline_state",t)},expression:"query.outline_state"}},e._l(e.stateOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.isLoading},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-lx-roundclose"},on:{click:e.handleReset}},[e._v("重置")])],1),a("div",{staticClass:"handle-box"},["20"===e.userState?a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.delAllSelection}},[e._v("批量删除\n      ")]):e._e(),""!==e.userState?a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-top"},on:{click:e.handleUpload}},[e._v("上传大纲\n      ")]):e._e()],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange}},["20"===e.userState?a("el-table-column",{key:"1",attrs:{type:"selection","min-width":"4%",align:"center"}}):e._e(),a("el-table-column",{key:"2",attrs:{prop:"outlineId","min-width":"5%",fixed:"left",label:"大纲ID",align:"center"}}),a("el-table-column",{key:"3",attrs:{prop:"fileName",label:"文件名","min-width":"24%",align:"center",fixed:"left"}}),a("el-table-column",{key:"4",attrs:{prop:"enName",label:"英文名称","min-width":"16%",align:"center"}}),a("el-table-column",{key:"5",attrs:{prop:"collegeId",label:"上传学院","min-width":"12%",align:"center"}}),a("el-table-column",{key:"6",attrs:{prop:"updateTime",label:"更新时间","min-width":"13%",align:"center"}}),a("el-table-column",{key:"7",attrs:{prop:"checkTime",label:"审核时间","min-width":"13%",align:"center"}}),e._e(),e._e(),a("el-table-column",{key:"13",attrs:{label:"应用课程数","min-width":"8%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-search"},on:{click:function(a){return e.handleCourse(t.row.outlineId,t.row.fileName+" 绑定课程")}}},[e._v(e._s(t.row.connectNum))])]}}])}),a("el-table-column",{key:"11",attrs:{prop:"outline",label:"课程大纲","min-width":"8%",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return["10"===t.row.outlineState?a("div",["20"===e.userState||"21"===e.userState&&e.myCollege===t.row.collegeId?e._e():a("el-tag",{attrs:{type:"success"}},[e._v("待审核")]),"20"===e.userState||"21"===e.userState&&e.myCollege===t.row.collegeId?a("el-button",{attrs:{type:"text",icon:"el-icon-search"},on:{click:function(a){return e.handleCheck(t.row.outlineId)}}},[e._v("审核")]):e._e()],1):e._e(),"11"===t.row.outlineState?a("div",[a("el-button",{attrs:{type:"text",icon:"el-icon-lx-down"},on:{click:function(a){return e.downloadOutline(t.row.outlineId)}}},[e._v("查看")])],1):e._e()]}}])}),""!==e.userState?a("el-table-column",{key:"12",attrs:{label:"操作","min-width":"8%",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index)}}},[e._v("删除")])]}}],null,!1,496579139)}):e._e()],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.courseQuery.page,"page-size":e.courseQuery.size,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:e.courseTitle,visible:e.courseCheckVisible,width:"90%"},on:{"update:visible":function(t){e.courseCheckVisible=t}}},[a("el-table",{staticClass:"table",attrs:{data:e.courseTableDate,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{key:3,attrs:{prop:"name",label:"课程名称","min-width":"12%",align:"center",fixed:""}}),a("el-table-column",{key:4,attrs:{prop:"majorId",label:"专业名称","min-width":"12%",align:"center"}}),a("el-table-column",{key:5,attrs:{prop:"collegeId",label:"开课学院","min-width":"12%",align:"center"}}),a("el-table-column",{key:6,attrs:{prop:"year",label:"年份","min-width":"6%",align:"center"}}),a("el-table-column",{key:7,attrs:{prop:"code",label:"课程代码","min-width":"8%",align:"center"}}),a("el-table-column",{key:8,attrs:{prop:"courseType",label:"课程类别","min-width":"9%",align:"center"}}),a("el-table-column",{key:9,attrs:{prop:"courseCategory",label:"课程性质","min-width":"8%",align:"center"}}),a("el-table-column",{key:10,attrs:{prop:"term",label:"修读学期","min-width":"6%",align:"center"}}),a("el-table-column",{key:11,attrs:{prop:"creditSum",label:"总学分","min-width":"5%",align:"center"}}),a("el-table-column",{key:12,attrs:{prop:"hourWeek",label:"总学时/周数","min-width":"5%",align:"center"}}),a("el-table-column",{key:13,attrs:{prop:"hourTeach",label:"讲课学时","min-width":"5%",align:"center"}}),a("el-table-column",{key:14,attrs:{prop:"hourPractice",label:"实验学时","min-width":"5%",align:"center"}}),a("el-table-column",{key:15,attrs:{prop:"hourOperation",label:"上机学时","min-width":"5%",align:"center"}}),a("el-table-column",{key:16,attrs:{prop:"hourOutside",label:"其他学时","min-width":"5%",align:"center"}}),a("el-table-column",{key:17,attrs:{prop:"testType",label:"考核方式","min-width":"5%",align:"center"}})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.page,"page-size":e.query.size,total:e.pageTotal2},on:{"current-change":e.handlePageChange2}})],1)],1),a("el-dialog",{attrs:{title:"上传大纲",visible:e.uploadVisible,width:"30%"},on:{"update:visible":function(t){e.uploadVisible=t}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{accept:".doc,.docx",limit:1,"file-list":e.fileList,action:"","on-change":e.onChange,"show-file-list":!0,"auto-upload":!1}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传doc/docx文件")])]),a("div",{staticClass:"mt10"},[a("el-input",{staticClass:"handle-input-upload",attrs:{placeholder:"请输入英文名"},model:{value:e.enName,callback:function(t){e.enName=t},expression:"enName"}})],1),a("div",{staticClass:"mt10"},[a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("同时绑定本学院课程")])]),a("div",{staticClass:"mt10"},[a("el-switch",{model:{value:e.extendSwitch,callback:function(t){e.extendSwitch=t},expression:"extendSwitch"}})],1),a("div",{staticClass:"mt10"},[e.extendSwitch?a("el-input",{staticClass:"handle-input mr10",attrs:{type:"number",placeholder:"年级(必填)"},model:{value:e.simpleQuery.year,callback:function(t){e.$set(e.simpleQuery,"year",t)},expression:"simpleQuery.year"}}):e._e(),e.extendSwitch?a("el-input",{staticClass:"handle-input mr10",attrs:{type:"number",placeholder:"课程代码(必填)"},model:{value:e.simpleQuery.code,callback:function(t){e.$set(e.simpleQuery,"code",t)},expression:"simpleQuery.code"}}):e._e(),e.extendSwitch?a("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.isLoading2},on:{click:e.handleSimpleSearch}},[e._v("搜索")]):e._e()],1),a("div",{staticClass:"mt10"},[e.extendSwitch?a("el-table",{ref:"simpleMultipleTable2",staticClass:"table",attrs:{data:e.simpleTableData,border:"","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange2}},[a("el-table-column",{key:1,attrs:{type:"selection","min-width":"4%",align:"center"}}),e._e(),a("el-table-column",{key:3,attrs:{prop:"name",label:"课程名称","min-width":"12%",align:"center"}}),a("el-table-column",{key:4,attrs:{prop:"majorId",label:"专业名称","min-width":"12%",align:"center"}}),e._e(),e._e(),a("el-table-column",{attrs:{prop:"outline",label:"课程大纲","min-width":"8%",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return["00"===t.row.courseState?a("div",[a("el-tag",{attrs:{type:"success"}},[e._v("无")])],1):e._e(),"01"===t.row.courseState?a("div",[a("el-tag",{attrs:{type:"danger"}},[e._v("待上传")])],1):e._e(),"02"===t.row.courseState?a("div",[a("el-tag",{attrs:{type:"success"}},[e._v("待审核")])],1):e._e(),"03"===t.row.courseState?a("div",[a("el-button",{attrs:{type:"text",icon:"el-icon-lx-down"},on:{click:function(a){return e.downloadOutline(t.row.outlineId)}}},[e._v("查看")])],1):e._e()]}}],null,!1,2227652133)})],1):e._e()],1),a("div",{staticClass:"mr10 mt10"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCancel}},[e._v("取消")])],1)],1),a("el-dialog",{attrs:{title:"审核大纲",visible:e.checkVisible,width:"30%"},on:{"update:visible":function(t){e.checkVisible=t}}},[a("div",{attrs:{align:"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.downloadOutline()}}},[e._v("下载查看")])],1),a("div",{staticClass:"mr10 mt20 ",attrs:{align:"center"}},[a("el-button",{attrs:{type:"success"},on:{click:e.handleCheckPass}},[e._v("审核通过")]),a("el-button",{attrs:{type:"danger"},on:{click:e.handleCheckFail}},[e._v("审核未通过")])],1),a("div",{staticClass:"mr10 mt10 ",attrs:{align:"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){this.checkVisible=!1}}},[e._v("取消")])],1)])],1)},i=[],s=a("365c"),n=a("2b0e"),r=a("7ed4"),o={name:"outline",data:function(){return{userState:"",myCollege:"",enName:"",isLoading:!1,isLoading2:!1,query:{page:1,size:10,outline_id:"",file_name:"",en_name:"",college_id:"",outline_state:""},simpleQuery:{code:"",year:""},courseQuery:{page:1,size:10,outline_id:""},checkOutlineId:"",courseTitle:"",stateOptions:[{value:"10",label:"未审核大纲"},{value:"11",label:"已审核大纲"}],fileList:[],tableData:[],simpleTableData:[],courseTableDate:[],extendSwitch:!1,multipleSelection:[],simpleMultipleSelection:[],courseCheckVisible:!1,uploadVisible:!1,checkVisible:!1,pageTotal:0,pageTotal2:0,form:{},idx:-1,id:-1}},created:function(){var e=this;r["a"].$on("checkOutline",(function(t){"undefined"!==typeof t&&(e.query.college_id="",e.query.outline_id=t,e.getData())})),r["a"].$on("checkOutline",(function(t){"undefined"!==typeof t&&(e.query.outline_id="",e.query.college_id=t,e.getData())}));var t=this.$route.query.outlineId,a=this.$route.query.collegeName;"undefined"!==typeof t&&(this.query.outline_id=t,this.$route.query.outlineId=""),"undefined"!==typeof a&&(this.query.college_id=a,this.$route.query.collegeName=""),this.userState="",this.myCollege="",this.getData(),Object(s["q"])().then((function(t){200===t.status&&(e.userReturn=t.data.data,e.userState=e.userReturn.userState,e.myCollege=e.userReturn.college)}))},methods:{getData:function(){var e=this;Object(s["p"])(this.query).then((function(t){e.isLoading=!1,e.resultObj=t.data,e.tableData=e.resultObj.data,e.pageTotal=e.resultObj.total}))},getSimpleData:function(){var e=this;Object(s["r"])(this.simpleQuery.code,this.simpleQuery.year).then((function(t){e.isLoading2=!1,e.simpleTableData=t.data.data}))},getCourseData:function(){var e=this;Object(s["n"])(this.courseQuery).then((function(t){e.resultObj=t.data,e.courseTableDate=e.resultObj.data,e.pageTotal2=e.resultObj.total}))},handleSearch:function(){this.isLoading=!0,this.getData()},handleSimpleSearch:function(){""!==this.simpleQuery.code&&""!==this.simpleQuery.year?(this.isLoading2=!0,this.getSimpleData()):this.$message.info("请输入课程代码与年级后再搜索")},handleReset:function(){this.query.page=1,this.query.size=10,this.query.outline_id="",this.query.file_name="",this.query.en_name="",this.query.college_id="",this.query.outline_state="",this.getData()},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){Object(s["j"])(a.tableData[e].outlineId).then((function(e){a.$message.success("删除成功"),a.getData()}),(function(e){a.$message.error("删除失败")}))})).catch((function(){}))},handleSelectionChange:function(e){this.multipleSelection=e},handleSelectionChange2:function(e){this.simpleMultipleSelection=e},delAllSelection:function(){var e=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){var t=e.multipleSelection.length,a="";t>0&&(a=e.multipleSelection[0].outlineId);for(var l=1;l<t;l++)a+="-"+e.multipleSelection[l].outlineId;Object(s["h"])(a).then((function(t){e.$message.error("删除成功"),e.handleSearch()}),(function(t){e.$message.error("删除失败")})),e.multipleSelection=[]})).catch((function(){}))},handlePageChange:function(e){this.$set(this.query,"page",e),this.getData()},downloadOutline:function(){var e=document.createElement("a");e.href=n["default"].prototype.$baseUrl+"/outline/download?outline_id="+this.checkOutlineId,e.click(),e.remove()},handleUpload:function(){this.uploadVisible=!0,this.fileList=[]},onChange:function(e,t){this.fileList=[],this.fileList.push(e)},handleSubmit:function(){var e=this;if(0!==this.fileList.length){var t=new FormData;if(t.append("uploadFile",this.fileList[0].raw),t.append("enName",this.enName),this.extendSwitch){var a=this.simpleMultipleSelection.length,l="";a>0&&(l=this.simpleMultipleSelection[0].courseId);for(var i=1;i<a;i++)l+="-"+this.simpleMultipleSelection[i].courseId;t.append("courseIds",l)}this.$message.info("正在上传,请等待......."),Object(s["d"])(t).then((function(t){e.handleCancel(),e.$message.success("上传成功"),e.extendSwitch=!1,e.simpleQuery.code="",e.simpleQuery.year="",e.simpleTableData=[],e.multipleSelection=[]}))}else this.$message.error("尚未选择文件")},handleCancel:function(){this.$refs.upload.clearFiles(),this.enName="",this.uploadVisible=!1},handleCourse:function(e,t){this.courseTitle=t,this.courseTableDate=[],this.courseQuery.outline_id=e,this.getCourseData(),this.courseCheckVisible=!0},handlePageChange2:function(e){this.$set(this.courseQuery,"page",e),this.getCourseData()},handleCheck:function(e){this.checkOutlineId=e,this.checkVisible=!0},handleCheckPass:function(){var e=this;Object(s["u"])(this.checkOutlineId).then((function(t){e.$message.success("审核完成"),e.handleSearch()}),(function(t){e.$message.error("审核失败")}))},handleCheckFail:function(){var e=this;Object(s["k"])(this.checkOutlineId).then((function(t){e.$message.success("审核完成"),e.handleSearch()}),(function(t){e.$message.error("审核失败")}))}}},c=o,u=(a("c7c3"),a("2877")),d=Object(u["a"])(c,l,i,!1,null,"2cee7511",null);t["default"]=d.exports},"2a8c":function(e,t,a){},"2eaf":function(e,t,a){},"4bec":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 学院列表\n      ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"学院名"},model:{value:e.query.college_name,callback:function(t){e.$set(e.query,"college_name",t)},expression:"query.college_name"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-lx-roundclose"},on:{click:e.handleReset}},[e._v("重置")])],1),a("div",{staticClass:"handle-box"},["20"===e.userState?a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-lx-searchlist"},on:{click:e.countNums}},[e._v("重新计数所有学院课程与大纲")]):e._e()],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"collegeId",label:"ID","min-width":"10%",align:"center"}}),a("el-table-column",{attrs:{prop:"collegeName",label:"学院名","min-width":"20%",align:"center"}}),a("el-table-column",{attrs:{prop:"courseNum",label:"课程总数","min-width":"10%",align:"center"}}),e._e(),a("el-table-column",{attrs:{label:"待修订大纲课程数","min-width":"10%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleTofix(t.row.collegeName)}}},[e._v(e._s(t.row.requireNum))])]}}])}),e._e(),a("el-table-column",{attrs:{label:"提交大纲数","min-width":"10%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleUpload(t.row.collegeName)}}},[e._v(e._s(t.row.uploadNum))])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.page,"page-size":e.query.size,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1)])},i=[],s=a("365c"),n=a("7ed4"),r={name:"college",data:function(){return{userState:"",myCollege:"",query:{page:1,size:10,college_id:"",college_name:""},tableData:[],pageTotal:0,form:{},idx:-1,id:-1}},created:function(){var e=this;this.userState="",this.myCollege="",this.getData(),Object(s["q"])().then((function(t){200===t.status&&(e.userReturn=t.data.data,e.userState=e.userReturn.userState,e.myCollege=e.userReturn.college)}))},methods:{getData:function(){var e=this;Object(s["l"])(this.query).then((function(t){e.resultObj=t.data,e.tableData=e.resultObj.data,e.pageTotal=e.resultObj.total}))},handleReset:function(){this.query.page=1,this.query.size=10,this.query.college_id="",this.query.college_name="",this.getData()},handleSearch:function(){this.$set(this.query,"page",1),this.getData()},handlePageChange:function(e){this.$set(this.query,"page",e),this.getData()},countNums:function(){var e=this;Object(s["e"])().then((function(t){e.$message.success("计数完成")}))},handleTofix:function(e){n["a"].$emit("checkCollegeRequire",e),this.$router.push({path:"/course",query:{collegeName:e}})},handleUpload:function(e){n["a"].$emit("checkOutline",e),this.$router.push({path:"/outline",query:{collegeName:e}})}}},o=r,c=(a("4f01"),a("2877")),u=Object(c["a"])(o,l,i,!1,null,"5f39af5a",null);t["default"]=u.exports},"4f01":function(e,t,a){"use strict";a("2eaf")},"5d79":function(e,t,a){},"63fb":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 课程列表\n      ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"课程名称"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"专业名称"},model:{value:e.query.major_id,callback:function(t){e.$set(e.query,"major_id",t)},expression:"query.major_id"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"开课学院"},model:{value:e.query.college_id,callback:function(t){e.$set(e.query,"college_id",t)},expression:"query.college_id"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{type:"number",placeholder:"年份"},model:{value:e.query.year,callback:function(t){e.$set(e.query,"year",t)},expression:"query.year"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{type:"number",placeholder:"课程代码"},model:{value:e.query.code,callback:function(t){e.$set(e.query,"code",t)},expression:"query.code"}})],1),a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"handle-select-m mr10",attrs:{placeholder:"课程性质"},model:{value:e.query.course_category,callback:function(t){e.$set(e.query,"course_category",t)},expression:"query.course_category"}},e._l(e.categoriesOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"课程类别"},model:{value:e.query.course_type,callback:function(t){e.$set(e.query,"course_type",t)},expression:"query.course_type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticClass:"handle-select-m mr10",attrs:{placeholder:"修读学期"},model:{value:e.query.term,callback:function(t){e.$set(e.query,"term",t)},expression:"query.term"}},e._l(8,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"大纲状态"},model:{value:e.query.course_state,callback:function(t){e.$set(e.query,"course_state",t)},expression:"query.course_state"}},e._l(e.stateOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.isLoading},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-lx-roundclose"},on:{click:e.handleReset}},[e._v("重置")])],1),a("div",{staticClass:"handle-box"},["20"===e.userState?a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.delAllSelection}},[e._v("批量删除\n      ")]):e._e(),""!==e.userState?a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchCourseToUpload}},[e._v("查询本学院待上传大纲课程\n      ")]):e._e(),""!==e.userState?a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchCourseToCheck}},[e._v("查询本学院待审核大纲课程\n      ")]):e._e(),"20"===e.userState||"21"===e.userState?a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-lx-friendadd"},on:{click:e.handleAdd}},[e._v("添加本学院课程")]):e._e(),"20"===e.userState?a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-lx-friendadd"},on:{click:e.handleAddAll}},[e._v("批量添加课程")]):e._e(),"20"===e.userState?a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-lx-friendadd"},on:{click:e.handleSetAll}},[e._v("批量设置课程为待修订")]):e._e()],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange}},["20"===e.userState?a("el-table-column",{key:1,attrs:{type:"selection","min-width":"4%",align:"center",fixed:""}}):e._e(),e._e(),a("el-table-column",{key:3,attrs:{prop:"name",label:"课程名称","min-width":"12%",align:"center",fixed:""}}),a("el-table-column",{key:4,attrs:{prop:"majorId",label:"专业名称","min-width":"12%",align:"center"}}),a("el-table-column",{key:5,attrs:{prop:"collegeId",label:"开课学院","min-width":"12%",align:"center"}}),a("el-table-column",{key:6,attrs:{prop:"year",label:"年份","min-width":"6%",align:"center"}}),a("el-table-column",{key:7,attrs:{prop:"code",label:"课程代码","min-width":"8%",align:"center"}}),a("el-table-column",{key:8,attrs:{prop:"courseType",label:"课程类别","min-width":"8%",align:"center"}}),a("el-table-column",{key:9,attrs:{prop:"courseCategory",label:"课程性质","min-width":"8%",align:"center"}}),a("el-table-column",{key:10,attrs:{prop:"term",label:"修读学期","min-width":"6%",align:"center"}}),a("el-table-column",{key:11,attrs:{prop:"creditSum",label:"总学分","min-width":"5%",align:"center"}}),a("el-table-column",{key:12,attrs:{prop:"hourWeek",label:"总学时/周数","min-width":"5%",align:"center"}}),a("el-table-column",{key:13,attrs:{prop:"hourTeach",label:"讲课学时","min-width":"5%",align:"center"}}),a("el-table-column",{key:14,attrs:{prop:"hourPractice",label:"实验学时","min-width":"5%",align:"center"}}),a("el-table-column",{key:15,attrs:{prop:"hourOperation",label:"上机学时","min-width":"5%",align:"center"}}),a("el-table-column",{key:16,attrs:{prop:"hourOutside",label:"其他学时","min-width":"5%",align:"center"}}),a("el-table-column",{key:17,attrs:{prop:"testType",label:"考核方式","min-width":"5%",align:"center"}}),e._e(),e._e(),a("el-table-column",{attrs:{prop:"outline",label:"课程大纲","min-width":"8%",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return["00"===t.row.courseState?a("div",[a("el-tag",{attrs:{type:"success"}},[e._v("无\n            ")])],1):e._e(),"01"===t.row.courseState?a("div",[e.myCollege!==t.row.collegeId?a("el-tag",{attrs:{type:"danger"}},[e._v("待上传\n            ")]):e._e(),e.myCollege===t.row.collegeId?a("el-button",{attrs:{type:"text",icon:"el-icon-lx-upload"},on:{click:function(a){return e.handleUpload(t.row.code,t.row.year,t.row.courseId)}}},[e._v("上传\n            ")]):e._e()],1):e._e(),"02"===t.row.courseState?a("div",["20"===e.userState||"21"===e.userState&&e.myCollege===t.row.collegeId?e._e():a("el-tag",{attrs:{type:"success"}},[e._v("待审核\n            ")]),"20"===e.userState||"21"===e.userState&&e.myCollege===t.row.collegeId?a("el-button",{attrs:{type:"text",icon:"el-icon-search"},on:{click:function(a){return e.checkOutline(t.row.outlineId)}}},[e._v("审核\n            ")]):e._e()],1):e._e(),"03"===t.row.courseState?a("div",[a("el-button",{attrs:{type:"text",icon:"el-icon-lx-down"},on:{click:function(a){return e.downloadOutline(t.row.outlineId)}}},[e._v("查看\n            ")])],1):e._e()]}}])}),"20"===e.userState||"21"===e.userState?a("el-table-column",{attrs:{label:"操作","min-width":"12%",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return["20"===e.userState||e.myCollege===t.row.collegeId?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n          ")]):e._e(),"20"===e.userState||e.myCollege===t.row.collegeId?a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除\n          ")]):e._e(),"21"===e.userState&&e.myCollege!==t.row.collegeId?a("el-tag",{attrs:{type:"'success'"}},[e._v("无权限\n          ")]):e._e()]}}],null,!1,1359857416)}):e._e()],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.page,"page-size":e.query.size,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"添加本学院课程",visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{ref:"form2",attrs:{model:e.addParam,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"学院名"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{placeholder:"学院名(必填)",disabled:"20"!==e.userState},model:{value:e.addParam.college_name,callback:function(t){e.$set(e.addParam,"college_name",t)},expression:"addParam.college_name"}})],1),a("el-form-item",{attrs:{label:"专业名"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{placeholder:"专业名(必填)"},model:{value:e.addParam.major_name,callback:function(t){e.$set(e.addParam,"major_name",t)},expression:"addParam.major_name"}})],1),a("el-form-item",{attrs:{label:"课程代码"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"课程代码(必填)"},model:{value:e.addParam.code,callback:function(t){e.$set(e.addParam,"code",t)},expression:"addParam.code"}})],1),a("el-form-item",{attrs:{label:"课程名称"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{placeholder:"课程名称(必填)"},model:{value:e.addParam.name,callback:function(t){e.$set(e.addParam,"name",t)},expression:"addParam.name"}})],1),a("el-form-item",{attrs:{label:"课程类别"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"课程类别"},model:{value:e.addParam.course_type,callback:function(t){e.$set(e.addParam,"course_type",t)},expression:"addParam.course_type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"课程性质"}},[a("el-select",{staticClass:"handle-select-m mr10",attrs:{placeholder:"课程性质"},model:{value:e.addParam.course_category,callback:function(t){e.$set(e.addParam,"course_category",t)},expression:"addParam.course_category"}},e._l(e.categoriesOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"修读学期"}},[a("el-select",{staticClass:"handle-select-m mr10",attrs:{placeholder:"修读学期"},model:{value:e.addParam.term,callback:function(t){e.$set(e.addParam,"term",t)},expression:"addParam.term"}},e._l(8,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"课程状态"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"课程状态"},model:{value:e.addParam.course_state,callback:function(t){e.$set(e.addParam,"course_state",t)},expression:"addParam.course_state"}},e._l(e.stateOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"年级"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"年级"},model:{value:e.addParam.year,callback:function(t){e.$set(e.addParam,"year",t)},expression:"addParam.year"}})],1),a("el-form-item",{attrs:{label:"总学分"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"总学分"},model:{value:e.addParam.credit_sum,callback:function(t){e.$set(e.addParam,"credit_sum",t)},expression:"addParam.credit_sum"}})],1),a("el-form-item",{attrs:{label:"总学时/周数"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"总学时/周数"},model:{value:e.addParam.hour_week,callback:function(t){e.$set(e.addParam,"hour_week",t)},expression:"addParam.hour_week"}})],1),a("el-form-item",{attrs:{label:"讲课学时"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"讲课学时"},model:{value:e.addParam.hour_teach,callback:function(t){e.$set(e.addParam,"hour_teach",t)},expression:"addParam.hour_teach"}})],1),a("el-form-item",{attrs:{label:"实验学时"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"实验学时"},model:{value:e.addParam.hour_practice,callback:function(t){e.$set(e.addParam,"hour_practice",t)},expression:"addParam.hour_practice"}})],1),a("el-form-item",{attrs:{label:"上机学时"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"上机学时"},model:{value:e.addParam.hour_operation,callback:function(t){e.$set(e.addParam,"hour_operation",t)},expression:"addParam.hour_operation"}})],1),a("el-form-item",{attrs:{label:"其他学时"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"其他学时"},model:{value:e.addParam.hour_outside,callback:function(t){e.$set(e.addParam,"hour_outside",t)},expression:"addParam.hour_outside"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addCourse}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.editParam,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"课程代码"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"课程代码"},model:{value:e.editParam.code,callback:function(t){e.$set(e.editParam,"code",t)},expression:"editParam.code"}})],1),a("el-form-item",{attrs:{label:"课程名称"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{placeholder:"课程名称"},model:{value:e.editParam.name,callback:function(t){e.$set(e.editParam,"name",t)},expression:"editParam.name"}})],1),a("el-form-item",{attrs:{label:"课程类别"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"课程类别"},model:{value:e.editParam.course_type,callback:function(t){e.$set(e.editParam,"course_type",t)},expression:"editParam.course_type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"课程性质"}},[a("el-select",{staticClass:"handle-select-m mr10",attrs:{placeholder:"课程性质"},model:{value:e.editParam.course_category,callback:function(t){e.$set(e.editParam,"course_category",t)},expression:"editParam.course_category"}},e._l(e.categoriesOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"修读学期"}},[a("el-select",{staticClass:"handle-select-m mr10",attrs:{placeholder:"修读学期"},model:{value:e.editParam.term,callback:function(t){e.$set(e.editParam,"term",t)},expression:"editParam.term"}},e._l(8,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"课程状态"}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"课程状态"},model:{value:e.editParam.course_state,callback:function(t){e.$set(e.editParam,"course_state",t)},expression:"editParam.course_state"}},e._l(e.stateOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"年级"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"年级"},model:{value:e.editParam.year,callback:function(t){e.$set(e.editParam,"year",t)},expression:"editParam.year"}})],1),a("el-form-item",{attrs:{label:"总学分"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"总学分"},model:{value:e.editParam.credit_sum,callback:function(t){e.$set(e.editParam,"credit_sum",t)},expression:"editParam.credit_sum"}})],1),a("el-form-item",{attrs:{label:"总学时/周数"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"总学时/周数"},model:{value:e.editParam.hour_week,callback:function(t){e.$set(e.editParam,"hour_week",t)},expression:"editParam.hour_week"}})],1),a("el-form-item",{attrs:{label:"讲课学时"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"讲课学时"},model:{value:e.editParam.hour_teach,callback:function(t){e.$set(e.editParam,"hour_teach",t)},expression:"editParam.hour_teach"}})],1),a("el-form-item",{attrs:{label:"实验学时"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"实验学时"},model:{value:e.editParam.hour_practice,callback:function(t){e.$set(e.editParam,"hour_practice",t)},expression:"editParam.hour_practice"}})],1),a("el-form-item",{attrs:{label:"上机学时"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"上机学时"},model:{value:e.editParam.hour_operation,callback:function(t){e.$set(e.editParam,"hour_operation",t)},expression:"editParam.hour_operation"}})],1),a("el-form-item",{attrs:{label:"其他学时"}},[a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"其他学时"},model:{value:e.editParam.hour_outside,callback:function(t){e.$set(e.editParam,"hour_outside",t)},expression:"editParam.hour_outside"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"批量添加课程",visible:e.addAllVisible,width:"30%"},on:{"update:visible":function(t){e.addAllVisible=t}}},[a("el-upload",{ref:"upload2",staticClass:"upload-demo",attrs:{accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",limit:1,"file-list":e.fileList2,action:"","on-change":e.onChange2,"show-file-list":!0,"auto-upload":!1}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xlsx/xls文件")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("工作簿表名为:")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("培养计划课程设置表")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("工作簿中列名为:")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("专业名称\t年级\t课程代码\t课程名称\t学分\t总学时")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("周学时\t讲课学时\t实验学时\t上机学时\t其他学时")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("课程性质\t考核方式\t开课学院\t建议修读学期\t课程类别")])]),a("div",{staticClass:"mr10 mt10",attrs:{align:"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit2}},[e._v("提交")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCancel2}},[e._v("取消")])],1)],1),a("el-dialog",{attrs:{title:"批量设置课程为待修订",visible:e.setAllVisible,width:"30%"},on:{"update:visible":function(t){e.setAllVisible=t}}},[a("el-upload",{ref:"upload3",staticClass:"upload-demo",attrs:{accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",limit:1,"file-list":e.fileList3,action:"","on-change":e.onChange3,"show-file-list":!0,"auto-upload":!1}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xlsx/xls文件")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("工作簿表名为:")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("待修订课程汇总表")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("工作簿中列名为:")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("课程代码")])]),a("el-input",{staticClass:"handle-input2 mr10",attrs:{type:"number",placeholder:"年级"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}}),a("div",{staticClass:"mr10 mt10",attrs:{align:"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit3}},[e._v("提交")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCancel3}},[e._v("取消")])],1)],1),a("el-dialog",{attrs:{title:"上传大纲",visible:e.outlineAddVisible,width:"50%"},on:{"update:visible":function(t){e.outlineAddVisible=t}}},[a("div",{staticClass:"mt10"},[a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("从本学院已上传大纲中选择")])]),a("div",{staticClass:"mt10"},[a("el-switch",{model:{value:e.extendSwitch0,callback:function(t){e.extendSwitch0=t},expression:"extendSwitch0"}})],1),e.extendSwitch0?a("div",{staticClass:"handle-box mt10"},[a("el-input",{staticClass:"handle-input mr10",attrs:{type:"number",placeholder:"大纲ID"},model:{value:e.outlineQuery.outline_id,callback:function(t){e.$set(e.outlineQuery,"outline_id",t)},expression:"outlineQuery.outline_id"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"文件名"},model:{value:e.outlineQuery.file_name,callback:function(t){e.$set(e.outlineQuery,"file_name",t)},expression:"outlineQuery.file_name"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"英文名"},model:{value:e.outlineQuery.en_name,callback:function(t){e.$set(e.outlineQuery,"en_name",t)},expression:"outlineQuery.en_name"}}),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"大纲状态"},model:{value:e.outlineQuery.outline_state,callback:function(t){e.$set(e.outlineQuery,"outline_state",t)},expression:"outlineQuery.outline_state"}},e._l(e.stateOptions2,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.isLoading2},on:{click:e.handleSearch2}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-lx-roundclose"},on:{click:e.handleReset2}},[e._v("重置")])],1):e._e(),e.extendSwitch0?a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.outlineTableData,"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"outlineId","min-width":"5%",fixed:"left",label:"大纲ID",align:"center"}}),a("el-table-column",{attrs:{prop:"fileName",label:"文件名","min-width":"24%",align:"center"}}),a("el-table-column",{key:"4",attrs:{prop:"enName",label:"英文名称","min-width":"16%",align:"center"}}),e._e(),a("el-table-column",{key:"11",attrs:{prop:"outline",label:"课程大纲","min-width":"8%",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return["10"===t.row.outlineState?a("div",[a("el-tag",{attrs:{type:"success"}},[e._v("待审核\n            ")])],1):e._e(),"11"===t.row.outlineState?a("div",[a("el-button",{attrs:{type:"text",icon:"el-icon-lx-down"},on:{click:function(a){return e.downloadOutline(t.row.outlineId)}}},[e._v("查看\n            ")])],1):e._e()]}}],null,!1,2635542611)})],1):e._e(),a("div",{staticClass:"pagination"},[e.extendSwitch0?a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.outlineQuery.page,"page-size":e.outlineQuery.size,total:e.pageTotal2},on:{"current-change":e.handlePageChange2}}):e._e()],1),e.extendSwitch0?e._e():a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{align:"center",accept:".doc,.docx",limit:1,"file-list":e.fileList,action:"","on-change":e.onChange,"show-file-list":!0,"auto-upload":!1}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传doc/docx文件")])]),a("div",{staticClass:"mt10"},[e.extendSwitch0?e._e():a("el-input",{staticClass:"handle-input-upload",attrs:{placeholder:"请输入英文名"},model:{value:e.enName,callback:function(t){e.enName=t},expression:"enName"}})],1),a("div",{staticClass:"mt10"},[a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("同时绑定其他专业相同课程")])]),a("div",{staticClass:"mt10"},[a("el-switch",{model:{value:e.extendSwitch,callback:function(t){e.extendSwitch=t},expression:"extendSwitch"}})],1),a("div",{staticClass:"mt10"},[e.extendSwitch?a("el-table",{ref:"simpleMultipleTable2",staticClass:"table",attrs:{data:e.simpleTableData,border:"","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange2}},[a("el-table-column",{key:1,attrs:{type:"selection","min-width":"4%",align:"center"}}),e._e(),a("el-table-column",{key:3,attrs:{prop:"name",label:"课程名称","min-width":"12%",align:"center"}}),a("el-table-column",{key:4,attrs:{prop:"majorId",label:"专业名称","min-width":"12%",align:"center"}}),e._e(),e._e(),a("el-table-column",{attrs:{prop:"outline",label:"课程大纲","min-width":"8%",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return["00"===t.row.courseState?a("div",[a("el-tag",{attrs:{type:"success"}},[e._v("无\n              ")])],1):e._e(),"01"===t.row.courseState?a("div",[a("el-tag",{attrs:{type:"danger"}},[e._v("待上传")])],1):e._e(),"02"===t.row.courseState?a("div",[a("el-tag",{attrs:{type:"success"}},[e._v("待审核")])],1):e._e(),"03"===t.row.courseState?a("div",[a("el-button",{attrs:{type:"text",icon:"el-icon-lx-down"},on:{click:function(a){return e.downloadOutline(t.row.outlineId)}}},[e._v("查看\n              ")])],1):e._e()]}}],null,!1,826770917)})],1):e._e()],1),a("div",{staticClass:"mr10 mt10"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCancel}},[e._v("取消")])],1)],1)],1)},i=[],s=(a("ac6a"),a("7f7f"),a("365c")),n=a("2b0e"),r=a("7ed4"),o={name:"course",data:function(){return{year:"",userState:"",myCollege:"",enName:"",isLoading:!1,isLoading2:!1,query:{page:1,size:10,course_id:"",code:"",name:"",course_type:"",course_category:"",outline_id:"",major_id:"",college_id:"",term:"",course_state:"",year:""},simpleQuery:{code:"",year:""},outlineQuery:{page:1,size:10,outline_id:"",file_name:"",en_name:"",college_id:"",outline_state:""},editParam:{course_id:"",code:"",name:"",course_type:"",course_category:"",term:"",course_state:"",year:"",credit_sum:"",hour_week:"",hour_teach:"",hour_practice:"",hour_operation:"",hour_outside:""},addParam:{code:"",name:"",college_name:"",major_name:"",course_type:"",course_category:"",term:"",course_state:"",year:"",credit_sum:"",hour_week:"",hour_teach:"",hour_practice:"",hour_operation:"",hour_outside:""},uploadParam:{outline_id:"",courseIds:[]},curCourseId:"",typeOptions:[{value:"0",label:"实验实践环节"},{value:"1",label:"通识教育必修"},{value:"2",label:"通识教育选修"},{value:"3",label:"专业方向必修"},{value:"4",label:"专业方向选修"},{value:"5",label:"专业基础必修"},{value:"6",label:"专业基础选修"}],categoriesOptions:[{value:"0",label:"必修课"},{value:"1",label:"选修课"}],stateOptions:[{value:"00",label:"无需修订大纲"},{value:"01",label:"待上传大纲"},{value:"02",label:"待审核大纲"},{value:"03",label:"已通过大纲"}],stateOptions2:[{value:"10",label:"未审核大纲"},{value:"11",label:"已审核大纲"}],tableData:[],outlineTableData:[],fileList:[],fileList2:[],fileList3:[],simpleTableData:[],multipleSelection:[],simpleMultipleSelection:[],delList:[],addAllVisible:!1,setAllVisible:!1,extendSwitch0:!1,extendSwitch:!1,editVisible:!1,addVisible:!1,outlineAddVisible:!1,pageTotal:0,pageTotal2:0,form:{},idx:-1,id:-1}},created:function(){var e=this;r["a"].$on("checkCollegeRequire",(function(t){"undefined"!==typeof t&&(e.query.major_id="",e.query.college_id=t,e.query.course_state="01",e.getData())})),r["a"].$on("checkMajorRequire",(function(t){"undefined"!==typeof t&&(e.query.college_id="",e.query.major_id=t,e.query.course_state="01",e.getData())}));var t=this.$route.query.collegeName,a=this.$route.query.majorName;"undefined"!==typeof t&&(this.query.college_id=t,this.query.course_state="01",this.$route.query.collegeName=""),"undefined"!==typeof a&&(this.query.major_id=a,this.query.course_state="01",this.$route.query.majorName=""),this.userState="",this.myCollege="",this.getData(),Object(s["q"])().then((function(t){200===t.status&&(e.userReturn=t.data.data,e.userState=e.userReturn.userState,e.myCollege=e.userReturn.college)}))},methods:{getData:function(){var e=this;Object(s["m"])(this.query).then((function(t){e.isLoading=!1,e.resultObj=t.data,e.tableData=e.resultObj.data,e.pageTotal=e.resultObj.total}))},getOutlineData:function(){var e=this;Object(s["p"])(this.outlineQuery).then((function(t){e.isLoading2=!1,e.resultObj=t.data,e.outlineTableData=e.resultObj.data,e.pageTotal2=e.resultObj.total}))},getSimpleData:function(){var e=this;Object(s["r"])(this.simpleQuery.code,this.simpleQuery.year).then((function(t){e.simpleTableData=t.data.data}))},handleCurrentChange:function(e){this.currentRow=e},handleSearch:function(){this.isLoading=!0,this.getData()},handleSearch2:function(){this.isLoading2=!0,this.getOutlineData()},handleReset:function(){this.query.page=1,this.query.size=10,this.query.course_id="",this.query.code="",this.query.name="",this.query.course_type="",this.query.course_category="",this.query.outline_id="",this.query.major_id="",this.query.college_id="",this.query.term="",this.query.course_state="",this.query.year="",this.getData()},handleReset2:function(){this.outlineQuery.page=1,this.outlineQuery.size=10,this.outlineQuery.outline_id="",this.outlineQuery.file_name="",this.outlineQuery.en_name="",this.outlineQuery.outline_state="",this.getData()},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){Object(s["i"])(a.tableData[e].courseId).then((function(e){a.$message.success("删除成功"),a.handleSearch()}),(function(e){a.$message.error("删除失败")}))})).catch((function(){}))},handleSelectionChange:function(e){this.multipleSelection=e},handleSelectionChange2:function(e){this.simpleMultipleSelection=e},delAllSelection:function(){var e=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){var t=e.multipleSelection.length,a="";t>0&&(a=e.multipleSelection[0].courseId);for(var l=1;l<t;l++)a+="-"+e.multipleSelection[l].courseId;Object(s["g"])(a).then((function(t){e.$message.error("删除成功"),e.handleSearch()}),(function(t){e.$message.error("删除失败")})),e.multipleSelection=[]})).catch((function(){}))},handleEdit:function(e,t){var a=this;this.idx=e,this.editParam.course_id=this.tableData[e].courseId,this.editParam.code=this.tableData[e].code,this.editParam.name=this.tableData[e].name,this.typeOptions.forEach((function(t,l){a.typeOptions[l].label===a.tableData[e].courseType&&(a.editParam.course_type=a.typeOptions[l].value)})),this.categoriesOptions.forEach((function(t,l){a.categoriesOptions[l].label===a.tableData[e].courseCategory&&(a.editParam.course_category=a.categoriesOptions[l].value)})),this.editParam.term=this.tableData[e].term,this.editParam.course_state=this.tableData[e].courseState,this.editParam.year=this.tableData[e].year,this.editParam.credit_sum=this.tableData[e].creditSum,this.editParam.hour_week=this.tableData[e].hourWeek,this.editParam.hour_teach=this.tableData[e].hourTeach,this.editParam.hour_practice=this.tableData[e].hourPractice,this.editParam.hour_operation=this.tableData[e].hourOperation,this.editParam.hour_outside=this.tableData[e].hourOutside,this.editVisible=!0},saveEdit:function(){var e=this;this.editVisible=!1,Object(s["w"])(this.editParam).then((function(t){e.$message.success("修改成功"),e.getData()}),(function(t){e.$message.error("修改失败")}))},handlePageChange:function(e){this.$set(this.query,"page",e),this.getData()},handlePageChange2:function(e){this.$set(this.outlineQuery,"page",e),this.getOutlineData()},downloadOutline:function(e){var t=document.createElement("a");t.href=n["default"].prototype.$baseUrl+"/outline/download?outline_id="+e,t.click(),t.remove()},searchCourseToCheck:function(){this.query.college_id=this.myCollege,this.query.course_state="02",this.getData()},searchCourseToUpload:function(){this.query.college_id=this.myCollege,this.query.course_state="01",this.getData()},checkOutline:function(e){r["a"].$emit("checkOutline",e),this.$router.push({path:"/outline",query:{outlineId:e}})},handleUpload:function(e,t,a){this.curCourseId=a,this.simpleQuery.code=e,this.simpleQuery.year=t,this.fileList=[],this.extendSwitch=!1,this.outlineAddVisible=!0,this.getOutlineData(),this.getSimpleData()},onChange:function(e,t){this.fileList=[],this.fileList.push(e)},onChange2:function(e,t){this.fileList2=[],this.fileList2.push(e)},onChange3:function(e,t){this.fileList3=[],this.fileList3.push(e)},handleSubmit:function(){var e=this;if(!0===this.extendSwitch0){if("undefined"===typeof this.currentRow)return void this.$message.error("尚未选择大纲");if(this.uploadParam.outline_id=this.currentRow.outlineId,this.uploadParam.courseIds=[],this.extendSwitch){var t=this.simpleMultipleSelection.length;if(0===t)return void this.$message.error("尚未选择课程");for(var a=0;a<t;a++)this.uploadParam.courseIds.push(this.simpleMultipleSelection[a].courseId)}else this.uploadParam.courseIds.push(this.curCourseId);Object(s["b"])(JSON.stringify(this.uploadParam)).then((function(t){e.$message.success("绑定成功"),e.getData()}))}else{if(0===this.fileList.length)return void this.$message.error("尚未选择文件");var l=new FormData;if(l.append("uploadFile",this.fileList[0].raw),l.append("enName",this.enName),this.extendSwitch){var i=this.simpleMultipleSelection.length,n="";i>0&&(n=this.simpleMultipleSelection[0].courseId);for(var r=1;r<i;r++)n+="-"+this.simpleMultipleSelection[r].courseId;l.append("courseIds",n)}else l.append("courseIds",this.curCourseId);this.$message.info("正在上传,请等待......."),Object(s["d"])(l).then((function(t){e.handleCancel(),e.$message.success("上传成功"),e.extendSwitch=!1,e.simpleQuery.code="",e.simpleQuery.year="",e.simpleTableData=[],e.multipleSelection=[]}))}this.outlineAddVisible=!1},handleSubmit2:function(){var e=this;if(0!==this.fileList2.length){var t=new FormData;t.append("uploadFile",this.fileList2[0].raw),this.$message.info("正在上传,请等待......."),Object(s["a"])(t).then((function(t){e.handleCancel2(),e.$message.success("上传成功")})),this.addAllVisible=!1}else this.$message.error("尚未选择文件")},handleSubmit3:function(){var e=this;if(0!==this.fileList3.length){var t=new FormData;t.append("uploadFile",this.fileList3[0].raw),t.append("year",this.year),this.$message.info("正在上传,请等待......."),Object(s["v"])(t).then((function(t){e.handleCancel3(),e.$message.success("上传成功")})),this.setAllVisible=!1}else this.$message.error("尚未选择文件")},handleCancel:function(){!1===this.extendSwitch0&&(this.$refs.upload.clearFiles(),this.enName=""),this.outlineAddVisible=!1},handleCancel2:function(){this.$refs.upload2.clearFiles(),this.addAllVisible=!1},handleCancel3:function(){this.$refs.upload3.clearFiles(),this.setAllVisible=!1},handleAdd:function(){this.addVisible=!0,this.addParam.college_name=this.myCollege},addCourse:function(){var e=this;""!==this.addParam.code&&""!==this.addParam.name&&""!==this.addParam.college_name&&""!==this.major_name.code?(this.editVisible=!1,Object(s["c"])(this.addParam).then((function(t){e.$message.success("添加成功"),e.getData()}),(function(t){e.$message.error("添加失败")}))):this.$message.info("请输入必要信息")},handleAddAll:function(){this.fileList2=[],this.addAllVisible=!0},handleSetAll:function(){this.fileList3=[],this.setAllVisible=!0}}},c=o,u=(a("dc42"),a("2877")),d=Object(u["a"])(c,l,i,!1,null,"421c3ff5",null);t["default"]=d.exports},"7ac2":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 专业列表\n      ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"学院名"},model:{value:e.query.college_name,callback:function(t){e.$set(e.query,"college_name",t)},expression:"query.college_name"}}),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"专业名"},model:{value:e.query.major_name,callback:function(t){e.$set(e.query,"major_name",t)},expression:"query.major_name"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-lx-roundclose"},on:{click:e.handleReset}},[e._v("重置")])],1),a("div",{staticClass:"handle-box"},["20"===e.userState?a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-lx-searchlist"},on:{click:e.countNums}},[e._v("重新计数所有专业课程")]):e._e()],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"majorId",label:"ID","min-width":"10%",align:"center"}}),a("el-table-column",{attrs:{prop:"collegeId",label:"学院名","min-width":"20%",align:"center"}}),a("el-table-column",{attrs:{prop:"majorName",label:"专业名","min-width":"20%",align:"center"}}),a("el-table-column",{attrs:{prop:"courseNum",label:"课程总数","min-width":"10%",align:"center"}}),e._e(),a("el-table-column",{attrs:{label:"待修订大纲课程数","min-width":"10%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleTofix(t.row.majorName)}}},[e._v(e._s(t.row.requireNum))])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.page,"page-size":e.query.size,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1)])},i=[],s=a("365c"),n=a("7ed4"),r={name:"major",data:function(){return{userState:"",myCollege:"",query:{page:1,size:10,major_id:"",major_name:"",college_name:""},tableData:[],multipleSelection:[],delList:[],editVisible:!1,pageTotal:0,form:{},idx:-1,id:-1}},created:function(){var e=this;this.userState="",this.myCollege="",this.getData(),Object(s["q"])().then((function(t){200===t.status&&(e.userReturn=t.data.data,e.userState=e.userReturn.userState,e.myCollege=e.userReturn.college)}))},methods:{getData:function(){var e=this;Object(s["o"])(this.query).then((function(t){e.resultObj=t.data,e.tableData=e.resultObj.data,e.pageTotal=e.resultObj.total}))},handleReset:function(){this.query.page=1,this.query.size=10,this.query.major_id="",this.query.college_name="",this.query.major_name="",this.getData()},handleSearch:function(){this.$set(this.query,"page",1),this.getData()},handlePageChange:function(e){this.$set(this.query,"page",e),this.getData()},countNums:function(){var e=this;Object(s["f"])().then((function(t){e.$message.success("计数完成")}))},handleTofix:function(e){n["a"].$emit("checkMajorRequire",e),this.$router.push({path:"/course",query:{majorName:e}})}}},o=r,c=(a("142a"),a("2877")),u=Object(c["a"])(o,l,i,!1,null,"6dfdefdb",null);t["default"]=u.exports},"7ed4":function(e,t,a){"use strict";var l=a("2b0e"),i=new l["default"];t["a"]=i},c7c3:function(e,t,a){"use strict";a("5d79")},dc42:function(e,t,a){"use strict";a("2a8c")},e706:function(e,t,a){}}]);
//# sourceMappingURL=table.5462a4f8.js.map